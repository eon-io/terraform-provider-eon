---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "eon_restore_job Resource - terraform-provider-eon"
subcategory: ""
description: |-
  Eon restore job resource - supports EBS volume restore operations
---

# eon_restore_job (Resource)

Eon restore job resource - supports EBS volume restore operations

## Example Usage

```terraform
#1. EBS Volume Restore
resource "eon_restore_job" "ebs_volume" {
  restore_type        = "partial"
  snapshot_id         = "cd6312c7-0713-4a24-a0b3-b838c1108d2f"
  restore_account_id  = "e696c7f0-17c6-4d9b-b589-591293c00d36"
  timeout_minutes     = 120
  wait_for_completion = true

  ebs_config {
    provider_volume_id       = "vol-0f55f55a02e069c53"
    availability_zone        = "us-east-1a"
    volume_type              = "gp3"
    volume_size              = 100
    description              = "Test EBS volume restore from Eon using new resource"
    volume_encryption_key_id = "alias/aws/ebs"

    tags = {
      Name = "eon-test-restore"
      Test = "true"
    }
  }
}

# 2. EC2 Instance Restore
resource "eon_restore_job" "ec2_instance" {
  restore_type        = "full"
  snapshot_id         = "cd6312c7-0713-4a24-a0b3-b838c1108d2f"
  restore_account_id  = "e696c7f0-17c6-4d9b-b589-591293c00d36"
  timeout_minutes     = 120
  wait_for_completion = true

  ec2_config {
    region        = "us-east-1"
    instance_type = "t3.medium"
    subnet_id     = "subnet-0123456789abcdef0"
    security_group_ids = [
      "sg-0123456789abcdef0",
      "sg-0987654321fedcba0"
    ]

    tags = {
      Name        = "eon-restored-instance"
      Environment = "test"
      RestoreJob  = "true"
    }

    volume_restore_params {
      provider_volume_id = "vol-0f55f55a02e069c53"
      volume_type        = "gp3"
      volume_size        = 20
      iops               = 3000
      description        = "Root volume"
      kms_key_id         = "arn:aws:kms:us-east-1:851725316996:key/20c82703-ea74-45f9-a38c-0c142023d694"
    }


  }
}

# 3. RDS Database Restore
resource "eon_restore_job" "rds_database" {
  restore_type        = "full"
  snapshot_id         = "cd6312c7-0713-4a24-a0b3-b838c1108d2f"
  restore_account_id  = "e696c7f0-17c6-4d9b-b589-591293c00d36"
  timeout_minutes     = 180
  wait_for_completion = true

  rds_config {
    db_instance_identifier = "eon-restored-db"
    db_instance_class      = "db.t3.micro"
    engine                 = "mysql"
    region                 = "us-east-1"
    subnet_group_name      = "default"
    vpc_security_group_ids = [
      "sg-0123456789abcdef0"
    ]
    allocated_storage       = 20
    storage_type            = "gp2"
    backup_retention_period = 7
    multi_az                = false
    publicly_accessible     = false
    storage_encrypted       = true
    kms_key_id              = "alias/aws/rds"

    tags = {
      Name        = "eon-restored-database"
      Environment = "test"
      RestoreJob  = "true"
    }
  }
}
#
# 4. S3 Bucket Restore
resource "eon_restore_job" "s3_bucket" {
  restore_type        = "full"
  snapshot_id         = "cd6312c7-0713-4a24-a0b3-b838c1108d2f"
  restore_account_id  = "e696c7f0-17c6-4d9b-b589-591293c00d36"
  timeout_minutes     = 90
  wait_for_completion = true

  s3_bucket_config {
    bucket_name = "my-bucket"
    key_prefix  = "restored-data/"
  }
}

# 5. S3 File Restore
resource "eon_restore_job" "s3_files" {
  restore_type        = "partial"
  snapshot_id         = "cd6312c7-0713-4a24-a0b3-b838c1108d2f"
  restore_account_id  = "e696c7f0-17c6-4d9b-b589-591293c00d36"
  timeout_minutes     = 60
  wait_for_completion = true

  s3_file_config {
    bucket_name = "my-bucket"
    key_prefix  = "restored-files/"

    files {
      path         = "my-file.yml"
      is_directory = false
    }

    files {
      path         = "my-other-file.yaml"
      is_directory = false
    }
  }
}


output "ebs_restore_info" {
  value = {
    job_id       = eon_restore_job.ebs_volume.job_id
    status       = eon_restore_job.ebs_volume.status
    created_at   = eon_restore_job.ebs_volume.created_at
    completed_at = eon_restore_job.ebs_volume.completed_at
  }
}

output "ec2_restore_info" {
  value = {
    job_id       = eon_restore_job.ec2_instance.job_id
    status       = eon_restore_job.ec2_instance.status
    created_at   = eon_restore_job.ec2_instance.created_at
    completed_at = eon_restore_job.ec2_instance.completed_at
  }
}

output "rds_restore_info" {
  value = {
    job_id       = eon_restore_job.rds_database.job_id
    status       = eon_restore_job.rds_database.status
    created_at   = eon_restore_job.rds_database.created_at
    completed_at = eon_restore_job.rds_database.completed_at
  }
}

output "s3_bucket_restore_info" {
  value = {
    job_id       = eon_restore_job.s3_bucket.job_id
    status       = eon_restore_job.s3_bucket.status
    created_at   = eon_restore_job.s3_bucket.created_at
    completed_at = eon_restore_job.s3_bucket.completed_at
  }
}

output "s3_files_restore_info" {
  value = {
    job_id       = eon_restore_job.s3_files.job_id
    status       = eon_restore_job.s3_files.status
    created_at   = eon_restore_job.s3_files.created_at
    completed_at = eon_restore_job.s3_files.completed_at
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `restore_account_id` (String) Eon restore account ID
- `restore_type` (String) Type of restore job: 'full' for full resource restore, 'partial' for partial restore
- `snapshot_id` (String) Eon snapshot ID to restore from

### Optional

- `ebs_config` (Block, Optional) EBS volume restore configuration (required when restoring AWS EC2 volume with partial restore) (see [below for nested schema](#nestedblock--ebs_config))
- `ec2_config` (Block, Optional) EC2 instance restore configuration (required when restoring AWS EC2 instance with full restore) (see [below for nested schema](#nestedblock--ec2_config))
- `rds_config` (Block, Optional) RDS database restore configuration (required when restoring AWS RDS database) (see [below for nested schema](#nestedblock--rds_config))
- `resource_id` (String) Eon resource ID to restore from (defaults to snapshot_id if not provided)
- `s3_bucket_config` (Block, Optional) S3 bucket restore configuration (required when restoring AWS S3 bucket with full restore) (see [below for nested schema](#nestedblock--s3_bucket_config))
- `s3_file_config` (Block, Optional) S3 file restore configuration (required when restoring AWS S3 files with partial restore) (see [below for nested schema](#nestedblock--s3_file_config))
- `timeout_minutes` (Number) Timeout in minutes for restore operation
- `wait_for_completion` (Boolean) Whether to wait for completion

### Read-Only

- `completed_at` (String) Job completion timestamp
- `created_at` (String) Job creation timestamp
- `duration_seconds` (Number) Job duration in seconds
- `id` (String) Terraform resource identifier (same as job_id)
- `job_id` (String) Restore job ID
- `started_at` (String) Job start timestamp
- `status` (String) Current status of the restore job
- `status_message` (String) Status message with additional details

<a id="nestedblock--ebs_config"></a>
### Nested Schema for `ebs_config`

Optional:

- `availability_zone` (String) AWS availability zone for restored volume
- `description` (String) Description for restored volume
- `environment_encryption_key_id` (String) KMS key ID for environment encryption
- `iops` (Number) IOPS for volume (required for io1/io2)
- `provider_volume_id` (String) AWS volume ID to restore (e.g., vol-12345678)
- `tags` (Map of String) Tags to apply to restored volume
- `throughput` (Number) Throughput for gp3 volumes
- `volume_encryption_key_id` (String) KMS key ID for volume encryption
- `volume_size` (Number) Volume size in GiB
- `volume_type` (String) EBS volume type (gp2, gp3, io1, io2, etc.)


<a id="nestedblock--ec2_config"></a>
### Nested Schema for `ec2_config`

Optional:

- `instance_type` (String) Instance type to use for the restored instance
- `region` (String) AWS region to restore the instance to
- `security_group_ids` (List of String) List of security group IDs to associate with the restored instance
- `subnet_id` (String) Subnet ID to associate with the restored instance
- `tags` (Map of String) Tags to apply to the restored instance
- `volume_restore_params` (Block List) Volume restore parameters for the instance (see [below for nested schema](#nestedblock--ec2_config--volume_restore_params))

<a id="nestedblock--ec2_config--volume_restore_params"></a>
### Nested Schema for `ec2_config.volume_restore_params`

Optional:

- `description` (String) Description for the restored volume
- `iops` (Number) IOPS for volume (required for io1/io2)
- `kms_key_id` (String) KMS key ID for volume encryption
- `provider_volume_id` (String) Original volume ID from the snapshot
- `throughput` (Number) Throughput for gp3 volumes
- `volume_size` (Number) Volume size in GiB
- `volume_type` (String) EBS volume type (gp2, gp3, io1, io2, etc.)



<a id="nestedblock--rds_config"></a>
### Nested Schema for `rds_config`

Optional:

- `allocated_storage` (Number) Allocated storage in GiB
- `backup_retention_period` (Number) Backup retention period in days
- `db_instance_class` (String) DB instance class (e.g., db.t3.micro)
- `db_instance_identifier` (String) DB instance identifier
- `engine` (String) Database engine (e.g., mysql, postgres)
- `kms_key_id` (String) KMS key ID for encryption
- `multi_az` (Boolean) Whether to enable Multi-AZ deployment
- `publicly_accessible` (Boolean) Whether the database is publicly accessible
- `region` (String) AWS region to restore the database to
- `storage_encrypted` (Boolean) Whether to enable storage encryption
- `storage_type` (String) Storage type (gp2, gp3, io1, etc.)
- `subnet_group_name` (String) DB subnet group name
- `tags` (Map of String) Tags to apply to the restored database
- `vpc_security_group_ids` (List of String) List of VPC security group IDs


<a id="nestedblock--s3_bucket_config"></a>
### Nested Schema for `s3_bucket_config`

Optional:

- `bucket_name` (String) S3 bucket name to restore to
- `key_prefix` (String) Key prefix for restored objects
- `kms_key_id` (String) KMS key ID for encryption


<a id="nestedblock--s3_file_config"></a>
### Nested Schema for `s3_file_config`

Optional:

- `bucket_name` (String) S3 bucket name to restore to
- `files` (Block List) List of files to restore (see [below for nested schema](#nestedblock--s3_file_config--files))
- `key_prefix` (String) Key prefix for restored objects
- `kms_key_id` (String) KMS key ID for encryption

<a id="nestedblock--s3_file_config--files"></a>
### Nested Schema for `s3_file_config.files`

Optional:

- `is_directory` (Boolean) Whether the path is a directory (true) or file (false)
- `path` (String) File path to restore
