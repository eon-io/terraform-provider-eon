---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "eon_restore_job Resource - terraform-provider-eon"
subcategory: ""
description: |-
  Triggers a restore job to restore data from an Eon snapshot. This operation is asynchronous and returns a job ID that can be used to track the progress of the restore job.
---

# eon_restore_job (Resource)

Triggers a restore job to restore data from an Eon snapshot. This operation is asynchronous and returns a job ID that can be used to track the progress of the restore job.

## Example Usage

```terraform
#1. EBS Volume Restore
resource "eon_restore_job" "ebs_volume" {
  restore_type        = "partial"
  snapshot_id         = "cd6312c7-0713-4a24-a0b3-b838c1108d2f"
  restore_account_id  = "e696c7f0-17c6-4d9b-b589-591293c00d36"
  timeout_minutes     = 120
  wait_for_completion = true

  ebs_config {
    provider_volume_id       = "vol-0f55f55a02e069c53"
    availability_zone        = "us-east-1a"
    volume_type              = "gp3"
    volume_size              = 100
    description              = "Test EBS volume restore from Eon using new resource"
    volume_encryption_key_id = "alias/aws/ebs"

    tags = {
      Name = "eon-test-restore"
      Test = "true"
    }
  }
}

# 2. EC2 Instance Restore
resource "eon_restore_job" "ec2_instance" {
  restore_type        = "full"
  snapshot_id         = "cd6312c7-0713-4a24-a0b3-b838c1108d2f"
  restore_account_id  = "e696c7f0-17c6-4d9b-b589-591293c00d36"
  timeout_minutes     = 120
  wait_for_completion = true

  ec2_config {
    region        = "us-east-1"
    instance_type = "t3.medium"
    subnet_id     = "subnet-0123456789abcdef0"
    security_group_ids = [
      "sg-0123456789abcdef0",
      "sg-0987654321fedcba0"
    ]

    tags = {
      Name        = "eon-restored-instance"
      Environment = "test"
      RestoreJob  = "true"
    }

    volume_restore_params {
      provider_volume_id = "vol-0f55f55a02e069c53"
      volume_type        = "gp3"
      volume_size        = 20
      iops               = 3000
      description        = "Root volume"
      kms_key_id         = "arn:aws:kms:us-east-1:851725316996:key/20c82703-ea74-45f9-a38c-0c142023d694"
    }


  }
}

# 3. RDS Database Restore
resource "eon_restore_job" "rds_database" {
  restore_type        = "full"
  snapshot_id         = "cd6312c7-0713-4a24-a0b3-b838c1108d2f"
  restore_account_id  = "e696c7f0-17c6-4d9b-b589-591293c00d36"
  timeout_minutes     = 180
  wait_for_completion = true

  rds_config {
    db_instance_identifier = "eon-restored-db"
    db_instance_class      = "db.t3.micro"
    engine                 = "mysql"
    region                 = "us-east-1"
    subnet_group_name      = "default"
    vpc_security_group_ids = [
      "sg-0123456789abcdef0"
    ]
    allocated_storage       = 20
    storage_type            = "gp2"
    backup_retention_period = 7
    multi_az                = false
    publicly_accessible     = false
    storage_encrypted       = true
    kms_key_id              = "alias/aws/rds"

    tags = {
      Name        = "eon-restored-database"
      Environment = "test"
      RestoreJob  = "true"
    }
  }
}
#
# 4. S3 Bucket Restore
resource "eon_restore_job" "s3_bucket" {
  restore_type        = "full"
  snapshot_id         = "cd6312c7-0713-4a24-a0b3-b838c1108d2f"
  restore_account_id  = "e696c7f0-17c6-4d9b-b589-591293c00d36"
  timeout_minutes     = 90
  wait_for_completion = true

  s3_bucket_config {
    bucket_name = "my-bucket"
    key_prefix  = "restored-data/"
  }
}

# 5. S3 File Restore
resource "eon_restore_job" "s3_files" {
  restore_type        = "partial"
  snapshot_id         = "cd6312c7-0713-4a24-a0b3-b838c1108d2f"
  restore_account_id  = "e696c7f0-17c6-4d9b-b589-591293c00d36"
  timeout_minutes     = 60
  wait_for_completion = true

  s3_file_config {
    bucket_name = "my-bucket"
    key_prefix  = "restored-files/"

    files {
      path         = "my-file.yml"
      is_directory = false
    }

    files {
      path         = "my-other-file.yaml"
      is_directory = false
    }
  }
}


output "ebs_restore_info" {
  value = {
    job_id       = eon_restore_job.ebs_volume.job_id
    status       = eon_restore_job.ebs_volume.status
    created_at   = eon_restore_job.ebs_volume.created_at
    completed_at = eon_restore_job.ebs_volume.completed_at
  }
}

output "ec2_restore_info" {
  value = {
    job_id       = eon_restore_job.ec2_instance.job_id
    status       = eon_restore_job.ec2_instance.status
    created_at   = eon_restore_job.ec2_instance.created_at
    completed_at = eon_restore_job.ec2_instance.completed_at
  }
}

output "rds_restore_info" {
  value = {
    job_id       = eon_restore_job.rds_database.job_id
    status       = eon_restore_job.rds_database.status
    created_at   = eon_restore_job.rds_database.created_at
    completed_at = eon_restore_job.rds_database.completed_at
  }
}

output "s3_bucket_restore_info" {
  value = {
    job_id       = eon_restore_job.s3_bucket.job_id
    status       = eon_restore_job.s3_bucket.status
    created_at   = eon_restore_job.s3_bucket.created_at
    completed_at = eon_restore_job.s3_bucket.completed_at
  }
}

output "s3_files_restore_info" {
  value = {
    job_id       = eon_restore_job.s3_files.job_id
    status       = eon_restore_job.s3_files.status
    created_at   = eon_restore_job.s3_files.created_at
    completed_at = eon_restore_job.s3_files.completed_at
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `restore_account_id` (String) Eon-assigned ID of the restore account.
- `restore_type` (String) Type of restore job: `full` for full resource restore, `partial` for partial restore.
- `snapshot_id` (String) ID of the Eon snapshot to restore from.

### Optional

- `ebs_config` (Block, Optional) EBS volume restore configuration. Required when restoring AWS EC2 volume with `partial` restore type. (see [below for nested schema](#nestedblock--ebs_config))
- `ec2_config` (Block, Optional) EC2 instance restore configuration. Required when restoring AWS EC2 instance with `full` restore type. (see [below for nested schema](#nestedblock--ec2_config))
- `rds_config` (Block, Optional) RDS database restore configuration. Required when restoring AWS RDS database. (see [below for nested schema](#nestedblock--rds_config))
- `resource_id` (String) Eon-assigned ID of the resource to restore from (defaults to snapshot_id if not provided).
- `s3_bucket_config` (Block, Optional) S3 bucket restore configuration. Required when restoring AWS S3 bucket with `full` restore type. (see [below for nested schema](#nestedblock--s3_bucket_config))
- `s3_file_config` (Block, Optional) S3 file restore configuration. Required when restoring AWS S3 files with partial restore type. (see [below for nested schema](#nestedblock--s3_file_config))
- `timeout_minutes` (Number) Timeout in minutes for restore operation.
- `wait_for_completion` (Boolean) Whether to wait for completion.

### Read-Only

- `completed_at` (String) Date and time the job finished.
- `created_at` (String) Date and time the job was created.
- `duration_seconds` (Number) How long the job took, in seconds.
- `id` (String) Restore job ID.
- `job_id` (String) Restore job ID.
- `started_at` (String) Date and time the job started.
- `status` (String) Current status of the restore job. Possible values: `JOB_PENDING`, `JOB_RUNNING`, `JOB_COMPLETED`, `JOB_FAILED`, `JOB_PARTIAL`.
- `status_message` (String) Message that gives additional details about the job status, if applicable.

<a id="nestedblock--ebs_config"></a>
### Nested Schema for `ebs_config`

Optional:

- `availability_zone` (String) Availability zone to restore the volume to.
- `description` (String) Description to apply to the restored volume.
- `environment_encryption_key_id` (String) KMS key ID for environment encryption.
- `iops` (Number) IOPS for volume (required for io1/io2).
- `provider_volume_id` (String) Cloud-provider-assigned ID of the volume to restore.
- `tags` (Map of String) Tags to apply to the restored volume as key-value pairs, where key and value are both strings.
- `throughput` (Number) Throughput for gp3 volumes.
- `volume_encryption_key_id` (String) ID of the KMS key you want Eon to use for encrypting the restored volume.
- `volume_size` (Number) Volume size in GiB.
- `volume_type` (String) EBS volume type (gp2, gp3, io1, io2, etc.).


<a id="nestedblock--ec2_config"></a>
### Nested Schema for `ec2_config`

Optional:

- `instance_type` (String) Instance type to use for the restored instance.
- `region` (String) Region to restore the instance to.
- `security_group_ids` (List of String) List of security group IDs to associate with the restored instance.
- `subnet_id` (String) Subnet ID to associate with the restored instance.
- `tags` (Map of String) Tags to apply to the restored instance as key-value pairs, where key and value are both strings.
- `volume_restore_params` (Block List) Volumes to restore and attach to the restored instance. Each item corresponds to a volume to be restored, where `provider_volume_id` matches the volume's ID at the time of the snapshot. The root volume must be present in the list. (see [below for nested schema](#nestedblock--ec2_config--volume_restore_params))

<a id="nestedblock--ec2_config--volume_restore_params"></a>
### Nested Schema for `ec2_config.volume_restore_params`

Optional:

- `description` (String) Optional description for the restored volume.
- `iops` (Number) IOPS for volume (required for io1/io2).
- `kms_key_id` (String) ARN of the KMS key for encrypting the restored volume.
- `provider_volume_id` (String) Cloud-provider-assigned ID of the volume to restore.
- `throughput` (Number) Throughput for gp3 volumes.
- `volume_size` (Number) Volume size in GiB.
- `volume_type` (String) EBS volume type (gp2, gp3, io1, io2, etc.).



<a id="nestedblock--rds_config"></a>
### Nested Schema for `rds_config`

Optional:

- `allocated_storage` (Number) Allocated storage in GiB.
- `backup_retention_period` (Number) Backup retention period in days.
- `db_instance_class` (String) DB instance class (for example, db.t3.micro).
- `db_instance_identifier` (String) Name to assign to the restored resource.
- `engine` (String) Database engine (for example, mysql, postgres).
- `kms_key_id` (String) ID of the key you want Eon to use for encrypting the restored resource.
- `multi_az` (Boolean) Whether to enable Multi-AZ deployment.
- `publicly_accessible` (Boolean) Whether the database is publicly accessible.
- `region` (String) Region to restore to.
- `storage_encrypted` (Boolean) Whether to enable storage encryption.
- `storage_type` (String) Storage type (gp2, gp3, io1, etc.).
- `subnet_group_name` (String) Subnet group ID to associate with the restored resource. Must be in the same VPC of `vpc_security_group_ids`.
- `tags` (Map of String) Tags to apply to the restored instance as key-value pairs, where key and value are both strings.
- `vpc_security_group_ids` (List of String) List of security group IDs to associate with the restored resource. Must be in the same VPC of `subnet_group_name`.


<a id="nestedblock--s3_bucket_config"></a>
### Nested Schema for `s3_bucket_config`

Optional:

- `bucket_name` (String) Name of an existing bucket to restore the data to.
- `key_prefix` (String) Prefix to add to the restore path. If you don't specify a prefix, the files are restored to their respective folders in the original file tree, starting from the root of the bucket.
- `kms_key_id` (String) ID of the key you want Eon to use for encrypting the restored files.


<a id="nestedblock--s3_file_config"></a>
### Nested Schema for `s3_file_config`

Optional:

- `bucket_name` (String) Name of an existing bucket to restore the files to.
- `files` (Block List) List of file paths to restore. (see [below for nested schema](#nestedblock--s3_file_config--files))
- `key_prefix` (String) Prefix to add to the restore path. If you don't specify a prefix, the files are restored to their respective folders in the original file tree, starting from the root of the bucket.
- `kms_key_id` (String) ID of the key you want Eon to use for encrypting the restored files.

<a id="nestedblock--s3_file_config--files"></a>
### Nested Schema for `s3_file_config.files`

Optional:

- `is_directory` (Boolean) Whether `path` is a directory. If `true`, Eon restores all files in all subdirectories under the path. If `false`, Eon restores only the file at the path.
- `path` (String) Absolute path to the file or directory to restore.
