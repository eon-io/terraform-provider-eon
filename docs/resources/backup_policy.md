---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "eon_backup_policy Resource - terraform-provider-eon"
subcategory: ""
description: |-
  Eon backup policy resource for managing backup policies
---

# eon_backup_policy (Resource)

Eon backup policy resource for managing backup policies

## Example Usage

```terraform
terraform {
  required_providers {
    eon = {
      source = "eon-io/eon"
    }
  }
}

# Example: Basic backup policy with daily schedule
resource "eon_backup_policy" "daily_backup" {
  name    = "Daily Production Backup"
  enabled = true
  resource_selector = {
    resource_selection_mode = "ALL"
  }

  backup_plan = {
    backup_policy_type = "STANDARD"
    standard_plan = {
      backup_schedules = [
        {
          vault_id       = "vault-12345678-1234-1234-1234-123456789012"
          retention_days = 30
          schedule_config = {
            frequency = "DAILY"
            daily_config = {
              time_of_day_hour     = 2
              time_of_day_minutes  = 0
              start_window_minutes = 240
            }
          }
        }
      ]
    }
  }
}

# Example: High frequency backup policy
resource "eon_backup_policy" "high_frequency_backup" {
  name    = "High Frequency Critical Data Backup"
  enabled = true
  resource_selector = {
    resource_selection_mode = "ALL"
  }

  backup_plan = {
    backup_policy_type = "HIGH_FREQUENCY"
    high_frequency_plan = {
      resource_types = ["AWS_S3", "AWS_DYNAMO_DB"]
      backup_schedules = [
        {
          vault_id       = "e19a6ad1-6a97-49a1-b7c9-9620977ea018"
          retention_days = 7
          schedule_config = {
            frequency = "INTERVAL"
            interval_config = {
              interval_minutes = 30
            }
          }
        }
      ]
    }
  }
}

# Example: Conditional backup policy using new condition types
resource "eon_backup_policy" "conditional_backup" {
  name    = "Conditional Production Backup"
  enabled = true
  resource_selector = {
    resource_selection_mode = "CONDITIONAL"

    expression = {
      group = {
        operator = "AND"
        operands = [
          {
            resource_type = {
              operator       = "IN"
              resource_types = ["AWS_EC2", "AWS_RDS"]
            }
          },
          {
            environment = {
              operator     = "IN"
              environments = ["PROD"]
            }
          },
          {
            tag_keys = {
              operator = "CONTAINS_ANY_OF"
              tag_keys = ["Environment", "Owner"]
            }
          },
          {
            tag_key_values = {
              operator = "CONTAINS_ANY_OF"
              tag_key_values = [
                {
                  key   = "Environment"
                  value = "Production"
                },
                {
                  key   = "Critical"
                  value = "true"
                }
              ]
            }
          }
        ]
      }
    }
  }

  backup_plan = {
    backup_policy_type = "STANDARD"
    standard_plan = {
      backup_schedules = [
        {
          vault_id       = "e19a6ad1-6a97-49a1-b7c9-9620977ea018"
          retention_days = 60
          schedule_config = {
            frequency = "DAILY"
            daily_config = {
              time_of_day_hour     = 2
              time_of_day_minutes  = 0
              start_window_minutes = 240
            }
          }
        }
      ]
    }
  }
}
# Example: Comprehensive condition types demonstration
resource "eon_backup_policy" "all_condition_types" {
  name    = "All Condition Types Demo"
  enabled = true
  resource_selector = {
    resource_selection_mode = "CONDITIONAL"

    expression = {
      group = {
        operator = "AND"
        operands = [
          {
            resource_type = {
              operator       = "IN"
              resource_types = ["AWS_EC2", "AWS_RDS"]
            }
          },
          {
            environment = {
              operator     = "IN"
              environments = ["PROD"]
            }
          },
          {
            tag_keys = {
              operator = "CONTAINS_ANY_OF"
              tag_keys = ["Environment", "Owner"]
            }
          },
          {
            data_classes = {
              operator     = "CONTAINS_ANY_OF"
              data_classes = ["PII", "PHI"]
            }
          },
          {
            cloud_provider = {
              operator        = "IN"
              cloud_providers = ["AWS", "AZURE"]
            }
          },
          {
            apps = {
              operator = "CONTAINS_ANY_OF"
              apps     = ["web-app", "database"]
            }
          },
          {
            account_id = {
              operator    = "IN"
              account_ids = ["123456789012"]
            }
          },
          {
            source_region = {
              operator       = "IN"
              source_regions = ["us-east-1", "us-west-2"]
            }
          },
          {
            vpc = {
              operator = "IN"
              vpcs     = ["vpc-production"]
            }
          },
          {
            subnets = {
              operator = "CONTAINS_NONE_OF"
              subnets  = ["subnet-web-tier", "subnet-db-tier"]
            }
          },
          {
            resource_group_name = {
              operator             = "IN"
              resource_group_names = ["production-rg"]
            }
          },
          {
            resource_name = {
              operator       = "IN"
              resource_names = ["prod-", "critical-"]
            }
          },
          {
            resource_id = {
              operator     = "IN"
              resource_ids = ["i-123456789abcdef0"]
            }
          },
          {
            tag_key_values = {
              operator = "CONTAINS_ANY_OF"
              tag_key_values = [
                {
                  key   = "Environment"
                  value = "Production"
                },
                {
                  key   = "Critical"
                  value = "true"
                }
              ]
            }
          }
        ]
      }
    }
  }

  backup_plan = {
    backup_policy_type = "STANDARD"
    standard_plan = {
      backup_schedules = [
        {
          vault_id       = "e19a6ad1-6a97-49a1-b7c9-9620977ea018"
          retention_days = 60
          schedule_config = {
            frequency = "DAILY"
            daily_config = {
              time_of_day_hour     = 2
              time_of_day_minutes  = 0
              start_window_minutes = 240
            }
          }
        }
      ]
    }
  }
}

# Output examples
output "daily_backup_policy_id" {
  description = "ID of the daily backup policy"
  value       = eon_backup_policy.daily_backup.id
}

output "high_frequency_backup_policy_id" {
  description = "ID of the high frequency backup policy"
  value       = eon_backup_policy.high_frequency_backup.id
}

output "conditional_backup_policy_id" {
  description = "ID of the conditional backup policy"
  value       = eon_backup_policy.conditional_backup.id
}

output "all_condition_types_policy_id" {
  description = "ID of the policy demonstrating all condition types"
  value       = eon_backup_policy.all_condition_types.id
}

output "backup_policies_summary" {
  description = "Summary of all backup policies"
  value = {
    daily_backup = {
      id      = eon_backup_policy.daily_backup.id
      name    = eon_backup_policy.daily_backup.name
      enabled = eon_backup_policy.daily_backup.enabled
    }
    high_frequency_backup = {
      id      = eon_backup_policy.high_frequency_backup.id
      name    = eon_backup_policy.high_frequency_backup.name
      enabled = eon_backup_policy.high_frequency_backup.enabled
    }
    conditional_backup = {
      id      = eon_backup_policy.conditional_backup.id
      name    = eon_backup_policy.conditional_backup.name
      enabled = eon_backup_policy.conditional_backup.enabled
    }
    all_condition_types = {
      id      = eon_backup_policy.all_condition_types.id
      name    = eon_backup_policy.all_condition_types.name
      enabled = eon_backup_policy.all_condition_types.enabled
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `backup_plan` (Attributes) Backup plan configuration (see [below for nested schema](#nestedatt--backup_plan))
- `enabled` (Boolean) Whether the backup policy is enabled
- `name` (String) Display name for the backup policy
- `resource_selector` (Attributes) Resource selector configuration (see [below for nested schema](#nestedatt--resource_selector))

### Read-Only

- `created_at` (String) Creation timestamp
- `id` (String) Backup policy identifier
- `updated_at` (String) Last update timestamp

<a id="nestedatt--backup_plan"></a>
### Nested Schema for `backup_plan`

Required:

- `backup_policy_type` (String) Backup policy type: 'STANDARD', 'HIGH_FREQUENCY', or 'PITR'

Optional:

- `high_frequency_plan` (Attributes) High frequency backup plan configuration (see [below for nested schema](#nestedatt--backup_plan--high_frequency_plan))
- `standard_plan` (Attributes) Standard backup plan configuration (see [below for nested schema](#nestedatt--backup_plan--standard_plan))

<a id="nestedatt--backup_plan--high_frequency_plan"></a>
### Nested Schema for `backup_plan.high_frequency_plan`

Required:

- `backup_schedules` (Attributes List) List of backup schedules (see [below for nested schema](#nestedatt--backup_plan--high_frequency_plan--backup_schedules))
- `resource_types` (List of String) List of resource types for high frequency backups

<a id="nestedatt--backup_plan--high_frequency_plan--backup_schedules"></a>
### Nested Schema for `backup_plan.high_frequency_plan.backup_schedules`

Required:

- `retention_days` (Number) Retention days
- `schedule_config` (Attributes) Schedule configuration (see [below for nested schema](#nestedatt--backup_plan--high_frequency_plan--backup_schedules--schedule_config))
- `vault_id` (String) Vault ID

<a id="nestedatt--backup_plan--high_frequency_plan--backup_schedules--schedule_config"></a>
### Nested Schema for `backup_plan.high_frequency_plan.backup_schedules.schedule_config`

Required:

- `frequency` (String) Frequency: 'INTERVAL'
- `interval_config` (Attributes) Interval configuration (see [below for nested schema](#nestedatt--backup_plan--high_frequency_plan--backup_schedules--schedule_config--interval_config))

<a id="nestedatt--backup_plan--high_frequency_plan--backup_schedules--schedule_config--interval_config"></a>
### Nested Schema for `backup_plan.high_frequency_plan.backup_schedules.schedule_config.interval_config`

Required:

- `interval_minutes` (Number) Interval in hours

Optional:

- `start_window_minutes` (Number) Start window in minutes





<a id="nestedatt--backup_plan--standard_plan"></a>
### Nested Schema for `backup_plan.standard_plan`

Required:

- `backup_schedules` (Attributes List) List of backup schedules (see [below for nested schema](#nestedatt--backup_plan--standard_plan--backup_schedules))

<a id="nestedatt--backup_plan--standard_plan--backup_schedules"></a>
### Nested Schema for `backup_plan.standard_plan.backup_schedules`

Required:

- `retention_days` (Number) Retention days
- `schedule_config` (Attributes) Schedule configuration (see [below for nested schema](#nestedatt--backup_plan--standard_plan--backup_schedules--schedule_config))
- `vault_id` (String) Vault ID

<a id="nestedatt--backup_plan--standard_plan--backup_schedules--schedule_config"></a>
### Nested Schema for `backup_plan.standard_plan.backup_schedules.schedule_config`

Required:

- `frequency` (String) Frequency: 'DAILY', 'WEEKLY', 'MONTHLY', 'ANNUALLY', 'INTERVAL'

Optional:

- `daily_config` (Attributes) Daily configuration (see [below for nested schema](#nestedatt--backup_plan--standard_plan--backup_schedules--schedule_config--daily_config))

<a id="nestedatt--backup_plan--standard_plan--backup_schedules--schedule_config--daily_config"></a>
### Nested Schema for `backup_plan.standard_plan.backup_schedules.schedule_config.daily_config`

Optional:

- `start_window_minutes` (Number) Start window in minutes
- `time_of_day_hour` (Number) Hour of day (0-23)
- `time_of_day_minutes` (Number) Minutes of hour (0-59)






<a id="nestedatt--resource_selector"></a>
### Nested Schema for `resource_selector`

Required:

- `resource_selection_mode` (String) Resource selection mode: 'ALL', 'NONE', or 'CONDITIONAL'

Optional:

- `expression` (Attributes) Conditional expression for CONDITIONAL resource selection mode (see [below for nested schema](#nestedatt--resource_selector--expression))
- `resource_exclusion_override` (List of String) List of resource IDs to exclude regardless of selection mode
- `resource_inclusion_override` (List of String) List of resource IDs to include regardless of selection mode

<a id="nestedatt--resource_selector--expression"></a>
### Nested Schema for `resource_selector.expression`

Optional:

- `environment` (Attributes) Environment condition (see [below for nested schema](#nestedatt--resource_selector--expression--environment))
- `group` (Attributes) Group condition with logical operator and operands (see [below for nested schema](#nestedatt--resource_selector--expression--group))
- `resource_type` (Attributes) Resource type condition (see [below for nested schema](#nestedatt--resource_selector--expression--resource_type))
- `tag_key_values` (Attributes) Tag key-value pairs condition (see [below for nested schema](#nestedatt--resource_selector--expression--tag_key_values))
- `tag_keys` (Attributes) Tag keys condition (see [below for nested schema](#nestedatt--resource_selector--expression--tag_keys))

<a id="nestedatt--resource_selector--expression--environment"></a>
### Nested Schema for `resource_selector.expression.environment`

Required:

- `environments` (List of String) List of environments
- `operator` (String) Operator: 'IN' or 'NOT_IN'


<a id="nestedatt--resource_selector--expression--group"></a>
### Nested Schema for `resource_selector.expression.group`

Required:

- `operands` (Attributes List) List of conditions (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands))
- `operator` (String) Logical operator: 'AND' or 'OR'

<a id="nestedatt--resource_selector--expression--group--operands"></a>
### Nested Schema for `resource_selector.expression.group.operands`

Optional:

- `account_id` (Attributes) Account ID condition (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--account_id))
- `apps` (Attributes) Apps condition (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--apps))
- `cloud_provider` (Attributes) Cloud provider condition (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--cloud_provider))
- `data_classes` (Attributes) Data classes condition (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--data_classes))
- `environment` (Attributes) Environment condition (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--environment))
- `resource_group_name` (Attributes) Resource group name condition (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--resource_group_name))
- `resource_id` (Attributes) Resource ID condition (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--resource_id))
- `resource_name` (Attributes) Resource name condition (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--resource_name))
- `resource_type` (Attributes) Resource type condition (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--resource_type))
- `source_region` (Attributes) Source region condition (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--source_region))
- `subnets` (Attributes) Subnets condition (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--subnets))
- `tag_key_values` (Attributes) Tag key-value pairs condition (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--tag_key_values))
- `tag_keys` (Attributes) Tag keys condition (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--tag_keys))
- `vpc` (Attributes) VPC condition (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--vpc))

<a id="nestedatt--resource_selector--expression--group--operands--account_id"></a>
### Nested Schema for `resource_selector.expression.group.operands.account_id`

Required:

- `account_ids` (List of String) List of account IDs
- `operator` (String) Operator: 'IN' or 'NOT_IN'


<a id="nestedatt--resource_selector--expression--group--operands--apps"></a>
### Nested Schema for `resource_selector.expression.group.operands.apps`

Required:

- `apps` (List of String) List of apps
- `operator` (String) Operator: 'CONTAINS' or 'NOT_CONTAINS'


<a id="nestedatt--resource_selector--expression--group--operands--cloud_provider"></a>
### Nested Schema for `resource_selector.expression.group.operands.cloud_provider`

Required:

- `cloud_providers` (List of String) List of cloud providers
- `operator` (String) Operator: 'IN' or 'NOT_IN'


<a id="nestedatt--resource_selector--expression--group--operands--data_classes"></a>
### Nested Schema for `resource_selector.expression.group.operands.data_classes`

Required:

- `data_classes` (List of String) List of data classes
- `operator` (String) Operator: 'CONTAINS' or 'NOT_CONTAINS'


<a id="nestedatt--resource_selector--expression--group--operands--environment"></a>
### Nested Schema for `resource_selector.expression.group.operands.environment`

Required:

- `environments` (List of String) List of environments
- `operator` (String) Operator: 'IN' or 'NOT_IN'


<a id="nestedatt--resource_selector--expression--group--operands--resource_group_name"></a>
### Nested Schema for `resource_selector.expression.group.operands.resource_group_name`

Required:

- `operator` (String) Operator: 'CONTAINS' or 'NOT_CONTAINS'
- `resource_group_names` (List of String) List of resource group names


<a id="nestedatt--resource_selector--expression--group--operands--resource_id"></a>
### Nested Schema for `resource_selector.expression.group.operands.resource_id`

Required:

- `operator` (String) Operator: 'IN' or 'NOT_IN'
- `resource_ids` (List of String) List of resource IDs


<a id="nestedatt--resource_selector--expression--group--operands--resource_name"></a>
### Nested Schema for `resource_selector.expression.group.operands.resource_name`

Required:

- `operator` (String) Operator: 'CONTAINS' or 'NOT_CONTAINS'
- `resource_names` (List of String) List of resource names


<a id="nestedatt--resource_selector--expression--group--operands--resource_type"></a>
### Nested Schema for `resource_selector.expression.group.operands.resource_type`

Required:

- `operator` (String) Operator: 'IN' or 'NOT_IN'
- `resource_types` (List of String) List of resource types


<a id="nestedatt--resource_selector--expression--group--operands--source_region"></a>
### Nested Schema for `resource_selector.expression.group.operands.source_region`

Required:

- `operator` (String) Operator: 'IN' or 'NOT_IN'
- `source_regions` (List of String) List of source regions


<a id="nestedatt--resource_selector--expression--group--operands--subnets"></a>
### Nested Schema for `resource_selector.expression.group.operands.subnets`

Required:

- `operator` (String) Operator: 'CONTAINS' or 'NOT_CONTAINS'
- `subnets` (List of String) List of subnets


<a id="nestedatt--resource_selector--expression--group--operands--tag_key_values"></a>
### Nested Schema for `resource_selector.expression.group.operands.tag_key_values`

Required:

- `operator` (String) Operator: 'IN' or 'NOT_IN'
- `tag_key_values` (Attributes List) List of tag key-value pairs to match (see [below for nested schema](#nestedatt--resource_selector--expression--group--operands--tag_key_values--tag_key_values))

<a id="nestedatt--resource_selector--expression--group--operands--tag_key_values--tag_key_values"></a>
### Nested Schema for `resource_selector.expression.group.operands.tag_key_values.tag_key_values`

Required:

- `key` (String) Tag key
- `value` (String) Tag value



<a id="nestedatt--resource_selector--expression--group--operands--tag_keys"></a>
### Nested Schema for `resource_selector.expression.group.operands.tag_keys`

Required:

- `operator` (String) Operator: 'IN' or 'NOT_IN'
- `tag_keys` (List of String) List of tag keys to match


<a id="nestedatt--resource_selector--expression--group--operands--vpc"></a>
### Nested Schema for `resource_selector.expression.group.operands.vpc`

Required:

- `operator` (String) Operator: 'IN' or 'NOT_IN'
- `vpcs` (List of String) List of VPCs




<a id="nestedatt--resource_selector--expression--resource_type"></a>
### Nested Schema for `resource_selector.expression.resource_type`

Required:

- `operator` (String) Operator: 'IN' or 'NOT_IN'
- `resource_types` (List of String) List of resource types


<a id="nestedatt--resource_selector--expression--tag_key_values"></a>
### Nested Schema for `resource_selector.expression.tag_key_values`

Required:

- `operator` (String) Operator: 'IN' or 'NOT_IN'
- `tag_key_values` (Attributes List) List of tag key-value pairs to match (see [below for nested schema](#nestedatt--resource_selector--expression--tag_key_values--tag_key_values))

<a id="nestedatt--resource_selector--expression--tag_key_values--tag_key_values"></a>
### Nested Schema for `resource_selector.expression.tag_key_values.tag_key_values`

Required:

- `key` (String) Tag key
- `value` (String) Tag value



<a id="nestedatt--resource_selector--expression--tag_keys"></a>
### Nested Schema for `resource_selector.expression.tag_keys`

Required:

- `operator` (String) Operator: 'IN' or 'NOT_IN'
- `tag_keys` (List of String) List of tag keys to match
